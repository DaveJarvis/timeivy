var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(a){var d=function(){};d.prototype=a;return new d};$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},d={};try{return d.__proto__=a,d.a}catch(b){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,d){a.__proto__=d;if(a.__proto__!==d)throw new TypeError(a+" is not extensible");return a}:null;
$jscomp.inherits=function(a,d){a.prototype=$jscomp.objectCreate(d.prototype);a.prototype.constructor=a;if($jscomp.setPrototypeOf){var b=$jscomp.setPrototypeOf;b(a,d)}else for(b in d)if("prototype"!=b)if(Object.defineProperties){var c=Object.getOwnPropertyDescriptor(d,b);c&&Object.defineProperty(a,b,c)}else a[b]=d[b];a.superClass_=d.prototype};
$jscomp.findInternal=function(a,d,b){a instanceof String&&(a=String(a));for(var c=a.length,h=0;h<c;h++){var g=a[h];if(d.call(b,g,h,a))return{i:h,v:g}}return{i:-1,v:void 0}};$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,d,b){a!=Array.prototype&&a!=Object.prototype&&(a[d]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,d,b,c){if(d){b=$jscomp.global;a=a.split(".");for(c=0;c<a.length-1;c++){var h=a[c];h in b||(b[h]={});b=b[h]}a=a[a.length-1];c=b[a];d=d(c);d!=c&&null!=d&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:d})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6","es3");$jscomp.polyfill("Object.is",function(a){return a?a:function(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,b){var c=this;c instanceof String&&(c=String(c));var d=c.length;for(b=b||0;b<d;b++)if(c[b]==a||Object.is(c[b],a))return!0;return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,d,b){if(null==a)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(d instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,b){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,b||0)}},"es6","es3");
Object.equals=function(a,d){if(!(a instanceof Object&&d instanceof Object))return!1;for(var b in a)if(a.hasOwnProperty(b)&&(!d.hasOwnProperty(b)||a[b]!==d[b]&&!Object.equals(a[b],d[b])))return!1;return!0};Object.defineProperty(Object.prototype,"encode",{value:function(){return encodeURIComponent(JSON.stringify(this))}});Object.defineProperty(Object.prototype,"decode",{value:function(){return JSON.parse(decodeURIComponent(this))}});Array.prototype.peek=function(){return this[this.length-1]};
Date.prototype.isWeekend=function(){var a=this.getDay();return 0==a||6==a};String.prototype.padLeft=function(a){return String(a+this).slice(-a.length)};
String.prototype.toTime=function(){var a=this,d=!1,b=!1,c=0,h=0;null!=a?(d=null!==a.match(/p/i),b=null!==a.match(/a/i),a=a.replace(/^00/,"24"),a=parseInt(a.replace(/\D/g,""),10)):a=0;0<a&&24>a?c=a:100<=a&&2359>=a?(c=~~(a/100),h=a%100):2400<=a&&(h=a%100,d=!1);12==c&&!1===b?d=!0:12<c&&(d=!0,c-=12);59<h&&(h=59);return(""+c).padLeft("00")+":"+(""+h).padLeft("00")+" "+(d?"PM":"AM")};Storage.prototype.put=function(a,d){this.setItem(a,LZString.compressToUTF16(d.encode()))};
Storage.prototype.get=function(a,d){a=this.getItem(a);return null===a?d:LZString.decompressFromUTF16(a).decode()};(function(a,d,b,c){function h(e,b){this.element=e;this.settings=a.extend({},g,b);this.settings.ivy=this;this._defaults=g;this._name="ivy";this._cell=[0,0];this._$cellInput=!1;this._commandExecutor=new k;this.init()}var g={classActiveCell:"ivy-active",classActiveCellInput:"ivy-editor",classCellReadOnly:"ivy-readonly",maxPageSize:30,dispatchKeysNavigate:[{k:"enter",f:"navigateDown"},{k:"up",f:"navigateUp"},{k:"down",f:"navigateDown"},{k:"left",f:"navigateLeft"},{k:"right",f:"navigateRight"},{k:"ctrl+up",
f:"navigateUpSkip"},{k:"ctrl+down",f:"navigateDownSkip"},{k:"ctrl+left",f:"navigateLeftSkip"},{k:"ctrl+right",f:"navigateRightSkip"},{k:"pageup",f:"navigatePageUp"},{k:"pagedown",f:"navigatePageDown"},{k:"home",f:"navigateRowHome"},{k:"end",f:"navigateRowEnd"},{k:"ctrl+home",f:"navigateHome"},{k:"ctrl+end",f:"navigateEnd"},{k:"shift+tab",f:"navigateLeft"},{k:"tab",f:"navigateRight"},{k:"f2",f:"editStart"},{k:"ctrl+x",f:"editCut"},{k:"ctrl+c",f:"editCopy"},{k:"ctrl+ins",f:"editCopy"},{k:"del",f:"editErase"},
{k:"shift+del",f:"editDeleteRow"},{k:"ins",f:"editInsertRow"},{k:"ctrl+i",f:"editInsertRow"},{k:"command+i",f:"editInsertRow"},{k:"shift+space",f:"editAppendRow"},{k:"ctrl+z",f:"editUndo"},{k:"command+z",f:"editUndo"},{k:"ctrl+shift+z",f:"editRedo"},{k:"ctrl+y",f:"editRedo"},{k:"command+y",f:"editRedo"}],dispatchKeysEdit:[{k:"up",f:"navigateUp"},{k:"down",f:"navigateDown"},{k:"shift+tab",f:"navigateLeft"},{k:"tab",f:"navigateRight"},{k:"enter",f:"editStop"},{k:"esc",f:"editCancel"}],init:function(){},
refreshCells:function(){},onCellValueChangeBefore:function(e,a,b){return e},onCellValueChangeAfter:function(e,a){},onRowInsertAfter:function(e,a){},onRowAppendAfter:function(e,a){},onRowDeleteAfter:function(e){}};a.extend(h.prototype,{init:function(){this.settings.init();this.setup();this.bindNavigateMode();this.bindPrintableKeys();this.bindNavigationClicks();this.bindPasteHandler();this.activate()},refreshCells:function(){this.settings.refreshCells()},setup:function(){Mousetrap.prototype.stopCallback=
function(e,a,b){e.preventDefault();return!1}},navigateTableCell:function(e){var a=e.parent().children().index(e);e=e.parent().parent().children().index(e.parent());!1===this.isActiveCell(e,a)&&this.navigate(e,a)},bindNavigationClicks:function(){var e=this,b=a(e.getTableBodyElement());b.on("click","td",function(){e.navigateTableCell(a(this))});b.on("dblclick doubletap","td",function(){e.navigateTableCell(a(this));e.editStart()})},bindPrintableKeys:function(){var e=this;a(e.getTableBodyElement()).on("keypress",
function(a){var b="number"===typeof a.which?a.which:a.keyCode;"keypress"!==a.type||!b||a.ctrlKey||a.metaKey||(e.editStart(String.fromCharCode(b)),a.stopPropagation(),a.preventDefault())})},unbindPrintableKeys:function(){a(this.getTableBodyElement()).off("keypress")},_bindDispatchKeys:function(e){Mousetrap.reset();for(var a=this,b={},c=0;c<e.length;b={f:b.f},c++){var f=e[c].k;b.f=e[c].f;Mousetrap.bind(f,function(e){return function(b){a[e.f]()}}(b))}},bindNavigateMode:function(){this._bindDispatchKeys(this.settings.dispatchKeysNavigate)},
bindEditMode:function(){this._bindDispatchKeys(this.settings.dispatchKeysEdit)},bindPasteHandler:function(){var e=this;a(b).on("paste",function(a){if(a.originalEvent){var b=a.originalEvent.clipboardData.getData("text");e.cellUpdate(b);a.stopPropagation();a.preventDefault()}})},_sanitizeCellIndex:function(e,a){return e>a?a:0>e?0:e},getTableBodyElement:function(){return a(this.element)[0]},getCellRow:function(){return this._cell[0]},getCellCol:function(){return this._cell[1]},setCellRow:function(e){this._cell[0]=
this._sanitizeCellIndex(e,this.getMaxRows())},setCellCol:function(e){this._cell[1]=this._sanitizeCellIndex(e,this.getMaxCols())},getCell:function(e,a){return this.getTableBodyElement().rows[e].cells[a]},getCellLastRow:function(e){var a=this.getMaxRows();return this.getCell(a,e)},getActiveCell:function(){var e=this.getCellRow(),a=this.getCellCol();return this.getCell(e,a)},getMaxRows:function(){return this.getTableBodyElement().rows.length-1},getMaxCols:function(){return this.getTableBodyElement().rows[0].cells.length-
1},isActiveCell:function(a,b){return this.isActiveCellRow(a)&&this.isActiveCellCol(b)},isActiveCellRow:function(a){return a===this.getCellRow()},isActiveCellCol:function(a){return a===this.getCellCol()},isActiveCellReadOnly:function(){return a(this.getActiveCell()).hasClass(this.settings.classCellReadOnly)},activate:function(){this.setCellRow(this.getCellRow());this.setCellCol(this.getCellCol());a(this.getActiveCell()).addClass(this.settings.classActiveCell)},deactivate:function(){a(this.getActiveCell()).removeClass(this.settings.classActiveCell)},
cellStateRetrieve:function(){var e=a(this.getActiveCell());return{cellRow:this.getCellRow(),cellCol:this.getCellCol(),cellValue:e.text()}},cellStateRestore:function(a){this._navigate(a.cellRow,a.cellCol);this.setActiveCellValue(a.cellValue)},getCommandExecutor:function(){return this._commandExecutor},execute:function(a){this.getCommandExecutor().execute(a)},focus:function(){a(this.getTableBodyElement()).focus()},_navigate:function(a,b){this.deactivate();this.setCellRow(a);this.setCellCol(b);this.activate();
this.focus()},navigate:function(a,b){this.editStop();this.execute(new m(this,a,b))},navigateRow:function(a){this.navigate(this.getCellRow()+a,this.getCellCol())},navigateCol:function(a){this.navigate(this.getCellRow(),this.getCellCol()+a)},navigatePageUp:function(){this.navigateRow(-this.settings.maxPageSize)},navigatePageDown:function(){this.navigateRow(+this.settings.maxPageSize)},navigateUp:function(){this.navigateRow(-1)},navigateDown:function(){this.navigateRow(1)},navigateLeft:function(){this.navigateCol(-1)},
navigateRight:function(){this.navigateCol(1)},navigateUpSkip:function(){console.log("Navigate up skip");this.navigateRow(-1)},navigateDownSkip:function(){console.log("Navigate down skip");this.navigateRow(1)},navigateLeftSkip:function(){console.log("Navigate left skip");this.navigateCol(-1)},navigateRightSkip:function(){console.log("Navigate right skip");this.navigateCol(1)},navigateHome:function(){this.navigate(0,0)},navigateEnd:function(){this.navigate(1E3,1E3)},navigateRowHome:function(){this.navigateCol(-1E3)},
navigateRowEnd:function(){this.navigateCol(1E3)},editCut:function(){this.execute(new n(this))},editCopy:function(){var e=a("<input>"),c=a(this.getActiveCell());a("body").append(e);e.val(c.text()).select();b.execCommand("copy");e.remove()},editErase:function(){this.cellUpdate("")},cellUpdate:function(a){this.isActiveCellReadOnly()||this.execute(new p(this,a))},cellInputCreate:function(e,b){e.addClass(this.settings.classActiveCellInput);var c=e.width();e=b?b:e.text();b=a("<input>");b.css({width:c,"max-width":c});
b.val(e);return b},cellInputDestroy:function(){var a=this.getCellInput(),b=a.val();a.remove();this.setCellInput(!1);return b},getCellInput:function(){return this._$cellInput},setCellInput:function(a){this._$cellInput=a},editStart:function(a){this.isActiveCellReadOnly()||this.execute(new t(this,a))},editStop:function(){var b=!1;!1!==this.getCellInput()&&(b=this.cellInputDestroy(),a(this.getActiveCell()).removeClass(this.settings.classActiveCellInput),this.setActiveCellValue(b),this.focus(),this.bindNavigateMode(),
this.bindPrintableKeys(),b=!0);return b},setCellValue:function(b,c,f){b=this.settings.onCellValueChangeBefore(b,c,f);a(this.getCell(c,f)).text(b);this.settings.onCellValueChangeAfter(c,f)},setActiveCellValue:function(a){var b=this.getCellRow(),e=this.getCellCol();this.setCellValue(a,b,e)},setActiveCellValueSilent:function(b){console.log("setActiveCellValueSilent "+b);if(!1!==b){var e=this.getActiveCell();a(e).text(b)}},editCancel:function(){this.editStop()&&this.editUndo()},editInsertColumn:function(a){this.execute(new u(this,
a))},editDeleteColumn:function(a){this.execute(new CommandDeleteColumn(this,a))},editInsertRow:function(){this.execute(new l(this))},editDeleteRow:function(){0<this.getMaxRows()&&this.execute(new q(this))},editAppendRow:function(){this.execute(new r(this))},editUndo:function(){this.getCommandExecutor().undo();this.refreshCells()},editRedo:function(){this.getCommandExecutor().redo()},onRowInsertAfter:function(a,b){this.settings.onRowInsertAfter(a,b)},onRowAppendAfter:function(a,b){this.settings.onRowAppendAfter(a,
b)},onRowDeleteAfter:function(a){this.settings.onRowDeleteAfter(a)}});var k=function(){this._undoStack=[];this._redoStack=[]};k.prototype.getUndoStack=function(){return this._undoStack};k.prototype.getRedoStack=function(){return this._redoStack};k.prototype.execute=function(a){a.execute();var b=this.getUndoStack(),e=b.peek();a.equals(e)||b.push(a)};k.prototype.undo=function(){var a=this.getUndoStack().pop();"undefined"!==typeof a&&(a.undo(),this.getRedoStack().push(a))};k.prototype.redo=function(){var a=
this.getRedoStack().pop();"undefined"!==typeof a&&this.execute(a)};var f=function(a){this._plugin=a;this.saveState()};f.prototype.execute=function(){};f.prototype.equals=function(a){return"undefined"===typeof a?!1:Object.equals(this.getState(),a.getState())};f.prototype.undo=function(){this.getPlugin().cellStateRestore(this.getState())};f.prototype.getId=function(){return(new Date).getTime()};f.prototype.saveState=function(){this.setState(this.getPlugin().cellStateRetrieve())};f.prototype.setState=
function(a){this._state=a};f.prototype.getState=function(){return this._state};f.prototype.getPlugin=function(){return this._plugin};var m=function(a,b,c){a=f.call(this,a)||this;a._row=b;a._col=c;return a};$jscomp.inherits(m,f);m.prototype.execute=function(){this.getPlugin()._navigate(this._row,this._col)};var n=function(a){return f.call(this,a)||this};$jscomp.inherits(n,f);n.prototype.execute=function(){var a=this.getPlugin();a.editCopy();a.editErase()};var t=function(a,b){a=f.call(this,a)||this;
a._charCode=b;return a};$jscomp.inherits(t,f);t.prototype.execute=function(){var b=this.getPlugin();b.bindEditMode();b.unbindPrintableKeys();var c=a(b.getActiveCell()),f=b.cellInputCreate(c,this._charCode);b.setCellInput(f);c.html(f);f.focus();f.on("focusout",function(){b.editStop()})};var p=function(a,b){a=f.call(this,a)||this;a._cellValue=b;return a};$jscomp.inherits(p,f);p.prototype.execute=function(){this.getPlugin().setActiveCellValue(this._cellValue)};var u=function(a,b){a=f.call(this,a)||this;
a._columnName=b;return a};$jscomp.inherits(u,f);u.prototype.execute=function(){var b=this.getPlugin();b.deactivate();a(b.getTableBodyElement()).parent().find("thead");b.activate()};var l=function(a){return f.call(this,a)||this};$jscomp.inherits(l,f);l.prototype.execute=function(){var a=this.getPlugin();a.deactivate();var b=this.getRow().clone();b.find("td").html("");this.setState({id:this.getId(),clone:b});this.inject(b);a.activate()};l.prototype.inject=function(a){var b=this.getRow();b.after(a);
this.getPlugin().onRowInsertAfter(b,a)};l.prototype.undo=function(){this.getState().clone.remove()};l.prototype.getRow=function(){return a(this.getPlugin().getActiveCell()).closest("tr")};var r=function(a){return l.call(this,a)||this};$jscomp.inherits(r,l);r.prototype.inject=function(a){var b=this.getRow();b.after(a);this.getPlugin().onRowAppendAfter(b,a)};r.prototype.getRow=function(){return a(this.getPlugin().getTableBodyElement()).find("tr:last")};var q=function(a){return f.call(this,a)||this};
$jscomp.inherits(q,f);q.prototype.execute=function(){var b=this.getPlugin();b.deactivate();var c=a(b.getActiveCell()).closest("tr");this.setState({id:this.getId(),row:c});c.remove();b.onRowDeleteAfter(c);b.activate()};q.prototype.undo=function(){this.getPlugin().editInsertRow()};a.fn.ivy=function(b){var c;this.each(function(){a.data(this,"plugin_ivy")||(c=new h(this,b),a.data(this,"plugin_ivy",c))});return c};d.Plugin=h})(jQuery,window,document);$(document).ready(function(){var a={description:"Controls for application behaviour.",title:"Preferences",type:"object",properties:{weekdays:{description:"Rows added when inserting new days.",type:"array",title:"Weekdays",format:"table",uniqueItems:!0,items:{type:"object",required:"weekday",properties:{weekday:{title:"Weekday",type:"string","enum":[0,1,2,3,4,5,6],options:{enum_titles:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ")}},times:{title:"Times",type:"array",format:"table",
items:{type:"object",properties:{began:{type:"string",title:"Began","default":"08:00 AM"},ended:{type:"string",title:"Ended","default":"04:00 PM"}}}}}}},formats:{description:"Timesheet display formats, change with caution.",title:"Format",type:"object",properties:{format_time:{type:"string",title:"Time","default":"HH:mm A"},format_date:{type:"string",title:"Date","default":"YYYY-MMM-DD"},format_prec:{type:"integer",title:"Precision","default":2}}},inclusion:{description:"Include these upon day insertion.",
type:"object",title:"Include",properties:{weekends:{type:"boolean",title:"Weekends",format:"checkbox","default":!1},holidays:{type:"boolean",title:"Holidays",format:"checkbox","default":!1}}},columns:{description:"Extra columns to help organize data.",type:"array",title:"Columns",format:"tabs",maxItems:3,items:{type:"string",title:"Column"}}}},d=$("#ivy tbody").ivy({init:function(){this.initMenu();this.initHeadings();this.initTimesheet();this.fillTimesheet();this.initPreferencesDialog();this.initPreferencesEditor();
this.initSuperhero();this.setChanged(!1)},initSuperhero:function(){var a=this;$(window).on("unload",function(){a.save()});setInterval(function(){a.save()},1E4)},initMenu:function(){for(var a=this.ivy,c=[{a:"edit-cut",f:"Cut"},{a:"edit-copy",f:"Copy"},{a:"edit-undo",f:"Undo"},{a:"edit-redo",f:"Redo"},{a:"insert-shift",f:"InsertRow"},{a:"delete-row",f:"DeleteRow"},{a:"append-day",f:"AppendRow"}],h=c.length,g={i:0};g.i<h;g={i:g.i},g.i++)$(".app-"+c[g.i].a).on("click",function(a){return function(b){d["edit"+
c[a.i].f]()}}(g));$(".ivy-export-csv").exportable({source:a.element,filename:"timesheet.csv"});$(".ivy-export-json").exportable({source:a.element,filename:"timesheet.json"})},initHeadings:function(){for(var a=$(this.ivy.getTableBodyElement()).prev("thead").find("tr:first"),c=this.getPreferences().columns,d=c.length,g="",k=0;k<d;k++)g+="<th>"+c[k]+"</th>";a.append(g)},initTimesheet:function(){var a=this,c=a.ivy,d=a.getPreferences().formats.format_date,g=moment().format("YYYY-MM-01");console.log(g);
var k=c.settings.classCellReadOnly;c=$(c.getTableBodyElement());var f="<tr>";c.prev("thead").find("tr:first > th").each(function(b){f+="<td";[0,3,4].includes(b)?(f+=" class='"+k+"'>",0===b&&(b=moment().startOf("month").subtract(1,"day"),b=a.getNextWorkDay(b),f+=b.format(d))):f+=">";f+="</td>"});f+="</tr>";c.append(f)},fillTimesheet:function(){},initPreferencesDialog:function(){$("#settings").dialog({dialogClass:"settings-dialog",autoOpen:!1,maxHeight:.75*$(window).height(),height:"auto",width:"auto",
closeOnEscape:!0,position:{my:"right top",at:"right top",of:window},buttons:{Ok:function(){$(this).dialog("close")},Cancel:function(){$(this).dialog("close")}}});$(".app-settings-preferences").on("click",function(a){$("#settings").dialog("open")})},initPreferencesEditor:function(){var b=document.getElementById("editor");new JSONEditor(b,{theme:"jqueryui",disable_collapse:!0,disable_edit_json:!0,disable_properties:!0,disable_array_reorder:!0,disable_array_delete_all_rows:!0,disable_array_delete_last_row:!0,
required_by_default:!0,no_additional_properties:!0,remove_empty_properties:!0,schema:a,startval:this.getPreferences()})},getCurrentMonth:function(){return moment().month()},getNextWorkDay:function(a){var b=this.getPreferences();a=a.clone();do a.add(1,"day");while(!b.inclusion.weekends&&a.toDate().isWeekend());return a},refreshCells:function(){for(var a=this.ivy.getMaxRows(),c=0;c<=a;c++)this.onCellValueChangeAfter(c,1)},onCellValueChangeBefore:function(a,c,d){if(1===d||2===d)a=a.toTime();return a},
onCellValueChangeAfter:function(a,c){if(1===c||2===c){c=this.ivy;var b=this.getPreferences(),d=this.updateCellTime(a,1),k=this.updateCellTime(a,2,d,60);d=moment.duration(k.diff(d)).asHours();d.toFixed&&(d=Math.abs(d).toFixed(b.formats.format_prec));$(c.getCell(a,3)).text(d);a=this.findConsecutive(a,0);b=this.sumConsecutive(a);$(c.getCell(a[0],4)).text(b);this.setChanged(!0)}},onRowInsertAfter:function(a,c){a=this.ivy;var b=c.find("td:eq(2)").text();c.find("td:not(:first-child)").empty();c=c.index();
a.setCellValue(b,c,1);a.refreshCells()},onRowAppendAfter:function(a,c){var b=this.ivy;c=c.find("td:first");var d=moment(c.text()),k=d.month();d=this.getNextWorkDay(d);var f=d.month();k===f?(a=this.getPreferences(),c.text(d.format(a.formats.format_date))):a.remove();b.refreshCells()},updateCellTime:function(a,c,d,g){var b=this.ivy,f=this.getPreferences();a=$(b.getCell(a,c));c=a.text();""==c&&(c=moment(d).add(g,"minutes"),c=c.format(f.formats.format_time),a.text(c));return moment.utc(c,f.formats.format_time)},
findConsecutive:function(a,c){for(var b=this.ivy,d=a,k=$(b.getCell(a,c)).text(),f=k;k==f&&0<=--d;)f=$(b.getCell(d,c)).text();var m=d+1,n=b.getMaxRows();d=a;for(f=k;k==f&&++d<n;)f=$(b.getCell(d,c)).text();return[m,d-1]},sumConsecutive:function(a){for(var b=this.ivy,d=this.getPreferences(),g=0,k=a[0];k<=a[1];k++)g+=parseFloat($(b.getCell(k,3)).text(),10)||0;g.toFixed&&(g=g.toFixed(d.formats.format_prec));return g},getMonth:function(){return"2018-05-01"},getTimesheet:function(){return"hello"},monthly:function(){var a=
[];a.push({month:this.getMonth(),timesheet:this.getTimesheet()});return a},save:function(){if(this.getChanged()){this.setChanged(!1);var a=this.monthly().encode(),c=a.decode();console.log(a);console.log(c)}},setChanged:function(a){this._changed=a},getChanged:function(){return this._changed},getDataStore:function(){return localStorage},put:function(a,c){this.getDataStore().put(a,c)},get:function(a,c){return this.getDataStore().get(a,c)},getDefaultTimesheets:function(){return['"2018-05-01","07:45 AM","03:45 PM","8.00","8.00","Worked on free food distribution system."']},
getTimesheets:function(){return this.get("ivy.timesheets",this.getDefaultTimesheet())},setTimesheets:function(a){return this.put("ivy.timesheets",a)},getDefaultPreferences:function(){return{formats:{format_time:"hh:mm A",format_date:"YYYY-MM-DD",format_prec:2},weekdays:[{weekday:1,times:[{began:"745",ended:"930"},{began:"930",ended:"1000"},{began:"1000",ended:"345p"}]}],inclusion:{weekends:!1,holidays:!1},columns:["Description"]}},getPreferences:function(){return this.get("ivy.preferences",this.getDefaultPreferences())},
setPreferences:function(a){this.put("ivy.preferences",a)}});$.extend(!0,d,{editAppendMonth:function(){var a=this.getMaxRows(),c=$(this.getCell(a,0));c=moment(c.text());for(a=c.month();a===c.add(1,"day").month();)this.editAppendRow(),c=$(this.getCellLastRow(0)),c=moment(c.text())}})});(function(a,d,b,c){function h(b,c){this.element=b;this.settings=a.extend({},g,c);this._defaults=g;this._name="exportable";this.init()}var g={source:"table",filename:"export.csv",exports:{csv:{file_extension:"csv",media_type_text:"text/csv",media_type_data:"application/csv",col_delimiter:'","',row_delimiter:'"\r\n"',temp_col_delimiter:String.fromCharCode(11),temp_row_delimiter:String.fromCharCode(0)},json:{file_extension:"json",media_type_text:"text/plain",media_type_data:"application/json"}},charset:"utf-8"};
a.extend(h.prototype,{init:function(){var b=this,c=b.settings.filename,d=c.slice((c.lastIndexOf(".")-1>>>0)+2);a(b.element).on("click tap",function(a){b[d]()})},csv:function(){var b=this.settings,c=b.exports,d=c.csv.temp_row_delimiter,g=c.csv.temp_col_delimiter,h=c.csv.row_delimiter,p=c.csv.col_delimiter;b='"'+a(b.source).find("tr:has( td )").map(function(b,c){return a(c).find("td").map(function(b,c){return a(c).text().replace(/"/g,'""')}).get().join(g)}).get().join(d).split(d).join(h).split(g).join(p)+
'"';this.download(b,c.csv)},json:function(){var b=this.settings,c=b.exports,d=b.source,g=[];a.each(a(d).parent().find("thead > tr > th"),function(b,c){g.push(a(c).text().toLowerCase())});var h=[];a.each(a(d).find("tr"),function(b,c){var f={};a.each(a(d).find("td"),function(b,c){f[g[b]]=a(this).text().trim()});h.push(f)});h=JSON.stringify(h);this.download(h,c.json)},download:function(b,c){var f=this.settings;d.Blob&&d.URL?(b=new Blob([b],{type:c.meda_type_text+"; charset="+f.charset}),b=URL.createObjectURL(b)):
b="data:"+c.media_type_data+"; charset="+f.charset+","+encodeURIComponent(b);a(this.element).attr({download:f.filename,href:b,target:""})},table_import:function(){}});a.fn.exportable=function(b){var c;this.each(function(){a.data(this,"plugin_exportable")||(c=new h(this,b),a.data(this,"plugin_exportable",c))});return c};d.Plugin=h})(jQuery,window,document);
