var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(b,c){return $jscomp.findInternal(this,b,c).v}},"es6","es3");
$(document).ready(function(){var a=$("#ivy tbody").ivy({columns:[{name:"wkday",f:"formatDate"},{name:"began",f:"formatTime"},{name:"ended",f:"formatTime"},{name:"shift"},{name:"total"}],onInit:function(){for(var b=this.ivy.getMaxRows(),c=0;c<=b;c++)this.onCellValueChangeAfter(c,1)},onCellValueChangeBefore:function(b,c,d){if(1===d||2===d)b=b.toTime();return b},onCellValueChangeAfter:function(b,c){if(1===c||2===c){c=this.ivy;var d=this.updateCellTime(b,1),a=this.updateCellTime(b,2,d,60);d=moment.duration(a.diff(d)).asHours();
d.toFixed&&(d=Math.abs(d).toFixed(2));$(c.getCell(b,3)).text(d);b=this.findConsecutive(b,0);d=this.sumConsecutive(b);$(c.getCell(b[0],4)).text(d)}},onRowInsertAfter:function(b,c){b=this.ivy;var d=c.find("td:eq(2)").text();c.find("td:not(:first-child)").empty();c=c.index();b.setCellValue(d,c,1)},onRowAppendAfter:function(b,c){b=c.find("td:first");var d=moment(b.text());c=d.clone().add(1,"day");d=d.get("month");var a=c.get("month");d===a&&b.text(c.format("YYYY-MM-DD"));this.onInit()},updateCellTime:function(b,
c,d,a){b=$(this.ivy.getCell(b,c));c=b.text();""==c&&(c=moment(d).add(a,"minutes"),c=c.format("hh:mm A"),b.text(c));return moment.utc(c,"hh:mm A")},findConsecutive:function(b,c){for(var d=this.ivy,a=b,f=$(d.getCell(b,c)).text(),g=f;f==g&&0<=--a;)g=$(d.getCell(a,c)).text();var h=a+1,k=d.getMaxRows();a=b;for(g=f;f==g&&++a<k;)g=$(d.getCell(a,c)).text();return[h,a-1]},sumConsecutive:function(b){for(var c=this.ivy,a=0,e=b[0];e<=b[1];e++)a+=parseFloat($(c.getCell(e,3)).text(),10)||0;a.toFixed&&(a=a.toFixed(2));
return a}});$("#timesheet").dialog({dialogClass:"settings-dialog",position:{my:"right bottom",at:"right bottom",of:window}});$("a#app-edit-undo").on("click",function(b){a.editUndo()});$("a#app-edit-redo").on("click",function(b){a.editRedo()});$("a#app-insert-shift").on("click",function(b){a.editInsertRow()});$("a#app-delete-row").on("click",function(b){a.editDeleteRow()});$("a#app-append-day").on("click",function(b){a.editAppendRow()});$("a#app-settings-timesheet").on("click",function(a){$("#timesheet").dialog("open")})});
