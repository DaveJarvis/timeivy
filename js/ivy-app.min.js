var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var f=a.length,d=0;d<f;d++){var e=a[d];if(b.call(c,e,d,a))return{i:d,v:e}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,b,c,f){if(b){c=$jscomp.global;a=a.split(".");for(f=0;f<a.length-1;f++){var d=a[f];d in c||(c[d]={});c=c[d]}a=a[a.length-1];f=c[a];b=b(f);b!=f&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(b,c){return $jscomp.findInternal(this,b,c).v}},"es6","es3");$jscomp.polyfill("Object.is",function(a){return a?a:function(b,c){return b===c?0!==b||1/b===1/c:b!==b&&c!==c}},"es6","es3");$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(b,c){var a=this;a instanceof String&&(a=String(a));var d=a.length;for(c=c||0;c<d;c++)if(a[c]==b||Object.is(a[c],b))return!0;return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(b,c){return-1!==$jscomp.checkStringArgs(this,b,"includes").indexOf(b,c||0)}},"es6","es3");
$(document).ready(function(){$(".ivy-export-csv").csv({data_table:"#ivy tbody",filename:"timesheet.csv"});var a=$("#ivy tbody").ivy({preferences:{format_time:"hh:mm A",format_date:"YYYY-MM-DD",format_prec:2,insert_rows:[{began:"7:45",ended:"9:30"},{began:"9:30",ended:"10:00"},{began:"10:00",ended:"3:45p"}],weekends:!1},init:function(){var b=this.ivy,c=this.preferences,a=b.settings.classCellReadOnly;b=$(b.getTableBodyElement());var d="<tr>";b.prev("thead").find("tr:first th").each(function(b){d+="<td";
[0,3,4].includes(b)?(d+=' class="'+a+'">',0===b&&(d+=moment().startOf("month").format(c.format_date))):d+=">";d+="</td>"});d+="</tr>";b.append(d)},refreshCells:function(){for(var b=this.ivy.getMaxRows(),c=0;c<=b;c++)this.onCellValueChangeAfter(c,1)},onCellValueChangeBefore:function(b,c,a){if(1===a||2===a)b=b.toTime();return b},onCellValueChangeAfter:function(b,c){if(1===c||2===c){c=this.ivy;var a=this.preferences,d=this.updateCellTime(b,1),e=this.updateCellTime(b,2,d,60);d=moment.duration(e.diff(d)).asHours();
d.toFixed&&(d=Math.abs(d).toFixed(a.format_prec));$(c.getCell(b,3)).text(d);b=this.findConsecutive(b,0);a=this.sumConsecutive(b);$(c.getCell(b[0],4)).text(a)}},onRowInsertAfter:function(b,c){b=this.ivy;var a=c.find("td:eq(2)").text();c.find("td:not(:first-child)").empty();c=c.index();b.setCellValue(a,c,1);b.refreshCells()},onRowAppendAfter:function(b,c){b=this.ivy;var a=this.preferences;c=c.find("td:first");var d=moment(c.text()),e=d.clone().add(1,"day");if(!a.weekends)for(;e.toDate().isWeekend();)e.add(1,
"day");d=d.month();var g=e.month();d===g&&c.text(e.format(a.format_date));b.refreshCells()},updateCellTime:function(b,c,a,d){var e=this.preferences;b=$(this.ivy.getCell(b,c));c=b.text();""==c&&(c=moment(a).add(d,"minutes"),c=c.format(e.format_time),b.text(c));return moment.utc(c,e.format_time)},findConsecutive:function(b,c){for(var a=this.ivy,d=b,e=$(a.getCell(b,c)).text(),g=e;e==g&&0<=--d;)g=$(a.getCell(d,c)).text();var h=d+1,k=a.getMaxRows();d=b;for(g=e;e==g&&++d<k;)g=$(a.getCell(d,c)).text();return[h,
d-1]},sumConsecutive:function(b){for(var c=this.ivy,a=this.preferences,d=0,e=b[0];e<=b[1];e++)d+=parseFloat($(c.getCell(e,3)).text(),10)||0;d.toFixed&&(d=d.toFixed(a.format_prec));return d}});$.extend(!0,a,{editAppendMonth:function(){var b=this.getMaxRows(),a=$(this.getCell(b,0));a=moment(a.text());for(b=a.month();b===a.add(1,"day").month();)this.editAppendRow(),a=$(this.getCellLastRow(0)),a=moment(a.text())}});$("#timesheet").dialog({dialogClass:"settings-dialog",position:{my:"right bottom",at:"right bottom",
of:window}});$(".app-edit-undo").on("click",function(b){a.editUndo()});$(".app-edit-redo").on("click",function(b){a.editRedo()});$(".app-insert-shift").on("click",function(b){a.editInsertRow()});$(".app-delete-row").on("click",function(b){a.editDeleteRow()});$(".app-append-day").on("click",function(b){a.editAppendRow()});$(".app-append-days").on("click",function(b){a.editAppendMonth()});$(".app-settings-timesheet").on("click",function(a){$("#timesheet").dialog("open")})});
